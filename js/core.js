function ShowOnView(e){function r(){$(window).bind("scroll."+n,function(){core.isElementInView(t)&&i()})}function i(){$(window).unbind("scroll."+n);t.css("margin-top","+=35").delay(300).animate({opacity:1,"margin-top":"-=35"},750)}var t=e,n=Math.random()*9999;r()}function runGlow(){if(!core.isElementInView($("#glow"))){setTimeout(runGlow,3e3);return}$("#glow").animate({opacity:0},150,function(){$(this).animate({opacity:1},150,function(){setTimeout(runGlow,250)})})}function SectionNav(e){function r(){t.click(function(e){e.preventDefault();i()})}function i(){if(core.isCurrentlyScrolling)return;core.isCurrentlyScrolling=!0;$.scrollTo($(".section").eq(n),{duration:750,axis:"y",onAfter:function(){core.isCurrentlyScrolling=!1}})}var t=e,n=e.data("section");r()}function Navigation(e){function i(){r.click(function(e){e.preventDefault()});$(window).scroll(function(){o()});$(window).resize(function(){s()});s();o()}function s(){t.css("top","0")}function o(){var e=$(window).scrollTop()+($(window).height()-50),t=Math.floor(e/$(".section").eq(0).height());$(window).scrollTop()==0&&(t=0);t>6&&(t=6);r.not(":eq("+t+")").removeClass("selected");r.eq(t).addClass("selected");t==0||t==6?$("#logo").fadeIn():$("#logo").fadeOut()}var t=e,n=t.find("li"),r=n.find("a");i()}function SoLoMo(){function o(){t.animate({opacity:1},500,function(){n.delay(100).animate({opacity:1},1e3,function(){r.delay(100).animate({opacity:1},500,function(){i.animate({opacity:1},500,function(){s.animate({opacity:1},500,function(){e.find(".showitlater").animate({opacity:1},750)})})})})})}var e=$("#sections #s0.section"),t=e.find(".item1"),n=e.find(".item2"),r=e.find(".item3"),i=e.find(".item4"),s=e.find(".item5");setTimeout(o,1e3)}function Tear(e){function u(){s=setInterval(a,2e3+Math.random()*2e3)}function a(){if(!core.isElementInView(t))return;if(o)return;o=!0;switch(r){case"up":t.animate({opacity:1},200,function(){$(this).animate({top:"-="+n},1250,function(){$(this).animate({opacity:0},200,function(){$(this).css({top:i.top,left:i.left});o=!1})})});break;case"down":t.animate({opacity:1},200,function(){$(this).animate({top:"+="+n},1250,function(){$(this).animate({opacity:0},200,function(){$(this).css({top:i.top,left:i.left});o=!1})})});break;case"right":t.animate({opacity:1},200,function(){$(this).animate({left:"+="+n},1250,function(){$(this).animate({opacity:0},200,function(){$(this).css({top:i.top,left:i.left});o=!1})})});break;default:t.css("opacity",1)}}var t=e,n=e.data("amount"),r=e.data("dir"),i={top:e.css("top"),left:e.css("left")},s=null,o=!1;u()}function Carousel(e){function u(){$(window).bind("scroll."+n,function(){core.isElementInView(t)&&a()})}function a(){$(window).unbind("scroll."+n);r=setTimeout(f,2e3)}function f(){if(!core.isElementInView(t)){r=setTimeout(f,2e3);return}i++;i>s&&(i=0);t.animate({"background-position":"-"+i*o+"px 0px"},500,function(){r=setTimeout(f,2e3)})}var t=e,n="carousel",r=null,i=0,s=8,o=200;u()}function Section3Animation(e){function o(){$(window).bind("scroll."+s,function(){core.isElementInView(t)&&u()})}function u(){$(window).unbind("scroll."+s);t.animate({opacity:1,"margin-top":50},750,function(){r.animate({width:166,height:165,opacity:1},750,function(){n.animate({top:212,opacity:1},500,function(){})})})}var t=e,n=t.find("#popup"),r=t.find("#shop"),i=0,s=Math.random()*99999;o()}function typeItOut(){function o(){r=setInterval(u,150);n.removeClass("off")}function u(){current++;if(current>=i.length){clearInterval(r);return}s+=i.charAt(current);t.html(s)}var e=$("#type_box"),t=e.find(".type"),n=e.find(".carrot"),r=null,i="Clothing stores nearby",s="";current=-1;o()}function BGPosition(e,t,n){function u(){$(window).bind("scroll."+i,function(){core.isElementInView(r)&&a()})}function a(){$(window).unbind("scroll."+i);r.animate({"background-position":o+"px 0px"},s,function(){n()})}var r=e,i=Math.random()*9999,s=1750,o=t;u()}function StretchWrap(e){function n(){$(window).resize(function(){r()});r()}function r(){var e=$(window).height()<850?850:$(window).height();t.css("height",e)}var t=e;n()}function BarGrower(e){function o(){$(window).bind("scroll."+n,function(){core.isElementInView(t)&&u()})}function u(){$(window).unbind("scroll."+n);t.animate({height:i},s)}var t=e,n=e.attr("id"),r=1,i=e.data("target"),s=750;o()}function NumberCounter(e){function a(){u<1&&(u=1);$(window).bind("scroll."+s,function(){core.isElementInView(t)&&f()})}function f(){$(window).unbind("scroll."+s);o=setInterval(l,25)}function l(){if(r<i){r+=u;n.html(c(r))}else{n.html(c(i));clearInterval(o)}}function c(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var t=e,n=t.find("span"),r=parseInt(n.html()),i=parseInt(t.data("total")),s=Math.random()*9999,o=null,u=Math.floor((i-r)/100);a()}function Sections(e,t){function l(){n.css({height:$(window).height()});$.each(t,function(e,t){i.push(new Section($(t)))});$(window).bind("scroll",function(e){e.preventDefault();h()});$(window).resize(function(){p()})}function c(){u=!1;o=$(window).scrollTop();$(window).bind("scroll",function(e){e.preventDefault();h()})}function h(){return}function p(){$.each(i,function(){this.resize()});n.css({height:$(window).height()})}var n=e,r=t,i=[],s=0,o=0,u=!1,a=t.length,f=null;l()}function Section(e){function r(){t.resize()}var t=this,n=e;this.resize=function(){n.css({height:$(window).height()})};this.getElement=function(){return n};r()}var core={isElementInView:function(e){return $(document).scrollTop()+$(window).height()>=e.offset().top+200&&$(document).scrollTop()+$(window).height()<e.offset().top+$(window).height()+50?!0:!1},isCurrentlyScrolling:!1};$(document).ready(function(){var e=new Sections($("#sections"),$(".section"));$('div[data-animation="count"], span[data-animation="count"]').each(function(){new NumberCounter($(this))});new BarGrower($("#phone_bar"));$(".stretchwrap").each(function(){new StretchWrap($(this))});new BGPosition($("#s2 .stretchwrap"),477,typeItOut);new BGPosition($("#s4 .stretchwrap.phone"),474,function(){$("#s4 .stretchwrap.sushi").animate({"background-position":"0px 0px"},750)});new Section3Animation($("#s3 .item1"));new Carousel($("#carousel"));$(".tear").each(function(){new Tear($(this))});new SoLoMo;new Navigation($("#nav"));$(".gotosection").each(function(){new SectionNav($(this))});$(".show_on_view").each(function(){new ShowOnView($(this))});runGlow();$("#logo").click(function(){window.location="http://www.welovedigital.com"})});